# Deployment Guide

This guide walks you through deploying the Stock Market Prediction App with:
- **Frontend**: Vercel (Next.js)
- **Backend**: Render (Python FastAPI)

## üöÄ Backend Deployment (Render)

### Step 1: Deploy to Render

1. **Connect Repository**:
   - Go to [render.com](https://render.com)
   - Click "New" ‚Üí "Web Service"
   - Connect your GitHub repository: `https://github.com/DamaineN/stock-market-prediction-app`

2. **Configure Service**:
   - **Name**: `stock-market-prediction-backend`
   - **Root Directory**: `backend`
   - **Environment**: `Python 3`
   - **Region**: `Oregon` (or closest to your users)
   - **Branch**: `master`
   - **Build Command**: `pip install -r ../requirements.txt`
   - **Start Command**: `python -m uvicorn main:app --host 0.0.0.0 --port $PORT`

3. **Environment Variables**:
   ```
   PYTHON_VERSION=3.12.0
   API_HOST=0.0.0.0
   CORS_ORIGINS=["https://your-frontend.vercel.app", "http://localhost:3000"]
   DEBUG_MODE=false
   SECRET_KEY=<auto-generated>
   JWT_SECRET=<auto-generated>
   MONGODB_URI=<your-mongodb-connection-string>
   ```

4. **Deploy**:
   - Click "Create Web Service"
   - Wait for deployment (5-10 minutes)
   - Note your backend URL: `https://your-backend-name.onrender.com`

### Step 2: Test Backend
```bash
curl https://your-backend-name.onrender.com/health
```

## üé® Frontend Deployment (Vercel)

### Step 1: Deploy to Vercel

1. **Connect Repository**:
   - Go to [vercel.com](https://vercel.com)
   - Click "New Project"
   - Import your GitHub repository: `https://github.com/DamaineN/stock-market-prediction-app`

2. **Configure Project**:
   - **Framework Preset**: `Next.js`
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build` (default)
   - **Output Directory**: `.next` (default)
   - **Install Command**: `npm ci` (default)

3. **Environment Variables**:
   ```
   NEXT_PUBLIC_API_URL=https://your-backend-name.onrender.com
   ```

4. **Deploy**:
   - Click "Deploy"
   - Wait for deployment (2-3 minutes)
   - Note your frontend URL: `https://your-project.vercel.app`

### Step 2: Update CORS Settings

1. Update your backend's CORS_ORIGINS environment variable on Render:
   ```
   CORS_ORIGINS=["https://your-project.vercel.app", "http://localhost:3000"]
   ```

2. Redeploy your backend service on Render

## üîß Configuration Updates

### Update vercel.json (already done)
```json
{
  "version": 2,
  "name": "stock-market-prediction-frontend",
  "env": {
    "NEXT_PUBLIC_API_URL": "https://your-backend.onrender.com"
  }
}
```

### Update render.yaml (already done)
The `render.yaml` is configured for backend-only deployment.

## üß™ Testing the Deployment

1. **Backend Health Check**:
   ```
   https://your-backend.onrender.com/health
   ```

2. **Frontend Access**:
   ```
   https://your-project.vercel.app
   ```

3. **API Integration**:
   - Test login/signup from frontend
   - Test stock predictions
   - Test dashboard data loading

## üìù Notes

- **Free Tier Limitations**:
  - Render: 750 hours/month, sleeps after 15 min inactivity
  - Vercel: 100GB bandwidth, unlimited deployments

- **Cold Starts**:
  - Backend may take 30+ seconds to wake up from sleep
  - Consider upgrading to paid plan for production

- **Environment Variables**:
  - Never commit `.env` files
  - Use environment variables for all configuration
  - Update URLs after deployment

## üîÑ Redeployment

- **Frontend**: Push to GitHub ‚Üí Auto-deploys on Vercel
- **Backend**: Push to GitHub ‚Üí Auto-deploys on Render